# Question4
## 问题
检查一下自己维护的业务系统的 JVM 参数配置，用 jstat 和 jstack、jmap 查看一下 详情，并且自己独立分析一下大概情况，思考有没有不合理的地方，如何改进。
## 背景
我司主要对政府部门的项目。项目内容主要为帮助他们管理清洗数据。这种系统通常并发不高，要求能在有限资源的情况下，保证处理流程稳定。
每个项目都采用了微服务的框架并拆分了多个子服务。在本地测试环境中1个或多个项目的所有服务启动在同一台服务器上。
## 回答
基于上述背景，检查了测试环境JVM相关配置以及程序运行情况，总结如下：
1. 每个服务为了方便部署都封装了docker，docker没用限制资源使用，也没有严格的设置-Xmx、-Xms。可能出现现场由于2-3个服务内存急剧增大而使整个服务down掉。
    1. 考虑每个服务需根据实际部署情况限制-Xmx、-Xms。最起码各服务-Xmx总和不要过服务器实际内存的150%
2. 每个项目一般都会使用es，在6.X的版本中es默认使用CMS作为垃圾回收方式，如果使用的JDK版本是10+则可以使用G1 gc
3. 业务GC使用的都是jdk8默认的Parallel GC，暂时不考虑更改
4. 使用jmap -histo 未发现项目有大对象问题
5. 还不太会看jstack的信息
6. 结合现场实际情况，可能会有**找出哪个方法或哪行代码上耗费大量CPU时间的需求**，目前还未找到相关命令。

